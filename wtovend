bot=getBot()stock_value=0 bl_vend={}function warp(d,w)while string.upper((bot:getWorld()).name)~=string.upper(d)do bot:sendPacket("\097\099\116\105\111\110\124\106\111\105\110\095\114\101\113\117\101\115\116\n\110\097\109\101\124"..(string.upper(d).."\n\105\110\118\105\116\101\100\087\111\114\108\100\124\048"),3)sleep(warpDelay)end if w==""or w==nil then return end while(bot:getTile(math.floor((bot:getLocal()).pos.x/32),math.floor((bot:getLocal()).pos.y/32))).fg==6 do bot:sendPacket("\097\099\116\105\111\110\124\106\111\105\110\095\114\101\113\117\101\115\116\n\110\097\109\101\124"..(string.upper(d)..("\124"..(string.upper(w).."\n\105\110\118\105\116\101\100\087\111\114\108\100\124\048"))),3)sleep(warpDelay)end end function collect(d,w)w=w or 0 for t,y in pairs(bot:getObjects())do local J=math.floor(y.pos.x/32)local K=math.floor(y.pos.y/32)if bot:isInside(J,K,d)then if y.id~=w then bot:collectObject(y.uid)end end end end function round(d)return d%1>.5 and math.ceil(d)or math.floor(d)end function take()warp(worldTake,doorTake)sleep(500)for d,w in pairs(bot:getObjects())do if w.id==itemId then if bot:findPath(round(w.pos.x/32)-1,math.floor(w.pos.y/32))then sleep(500)end collect(2)end if bot:getItemCount(itemId)>0 then break end end end function hook(d)if d[0]=="\079\110\068\105\097\108\111\103\082\101\113\117\101\115\116"then if d[1]:find("\099\111\110\116\097\105\110\115")then stock_value=d[1]:match("\097 \116\111\116\097\108 \111\102 \040\037\100\043\041")end end end function getpos()local d={x=math.floor((bot:getLocal()).pos.x/32),y=math.floor((bot:getLocal()).pos.y/32)}return d end function put()warp(worldDestination,doorDestination)sleep(500)for d,w in ipairs(bot:getTiles())do if w.fg==2978 then if w.extra.extraType==Vending and not bl_vend[w.x..("\044"..w.y)]then if w.extra.itemID==0 then if bot:findPath(w.x,w.y)then sleep(500)end sleep(1000)bot:wrenchTile((getpos()).x,(getpos()).y)sleep(1000)bot:sendPacket("\097\099\116\105\111\110\124\100\105\097\108\111\103\095\114\101\116\117\114\110\n\100\105\097\108\111\103\095\110\097\109\101\124\118\101\110\100\105\110\103\n\116\105\108\101\120\124"..(w.x..("\124\n\116\105\108\101\121\124"..(w.y..("\124\n\115\116\111\099\107\105\116\101\109\124"..itemId)))),2)stock_value=0 break elseif w.extra.itemID==itemId then if bot:findPath(w.x,w.y)then sleep(500)end sleep(2000)bot:wrenchTile((getpos()).x,(getpos()).y)while stock_value==0 do sleep(500)end if tonumber(stock_value)<=5000-bot:getItemCount(itemId)then bot:sendPacket("\097\099\116\105\111\110\124\100\105\097\108\111\103\095\114\101\116\117\114\110\n\100\105\097\108\111\103\095\110\097\109\101\124\118\101\110\100\105\110\103\n\116\105\108\101\120\124"..(w.x..("\124\n\116\105\108\101\121\124"..(w.y.."\124\n\098\117\116\116\111\110\067\108\105\099\107\101\100\124\097\100\100\115\116\111\099\107\n\n\115\101\116\112\114\105\099\101\124\048\n\099\104\107\095\112\101\114\105\116\101\109\124\048\n\099\104\107\095\112\101\114\108\111\099\107\124\049"))),2)stock_value=0 break else bl_vend[w.x..("\044"..w.y)]=true stock_value=0 end end end end end end bot:autoCollect(3,false)bot:setBool("\097\117\116\111\082\101\099\111\110\110\101\099\116",true)bot:addHook(hook,varlist)while true do while bot:getItemCount(itemId)==0 do take()end sleep(2000)while bot:getItemCount(itemId)>0 do put()end sleep(3000)end
